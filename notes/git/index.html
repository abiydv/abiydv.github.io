<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Git | @abiydv</title>
<meta name=keywords content><meta name=description content="Distributed version control system"><meta name=author content><link rel=canonical href=https://abiydv.github.io/notes/git/><link crossorigin=anonymous href=/assets/css/stylesheet.c5edd088d0c984c192170cfbab7d2de030010ee0b7d771bd6bca049dd2332874.css integrity="sha256-xe3QiNDJhMGSFwz7q30t4DABDuC313G9a8oEndIzKHQ=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://abiydv.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://abiydv.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://abiydv.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://abiydv.github.io/apple-touch-icon.png><link rel=mask-icon href=https://abiydv.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://abiydv.github.io/notes/git/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Git"><meta property="og:description" content="Distributed version control system"><meta property="og:type" content="article"><meta property="og:url" content="https://abiydv.github.io/notes/git/"><meta property="article:section" content="notes"><meta property="article:published_time" content="2024-07-02T00:00:00+00:00"><meta property="article:modified_time" content="2025-04-04T12:48:24+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git"><meta name=twitter:description content="Distributed version control system"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Notes","item":"https://abiydv.github.io/notes/"},{"@type":"ListItem","position":2,"name":"Git","item":"https://abiydv.github.io/notes/git/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Git","name":"Git","description":"Distributed version control system","keywords":[],"articleBody":"What is git? Distributed version control system.\ngit repo history git hooks git hooks redux\nHistory Linus developed git after being frustrated with the state of version control systems in that era. He had experienced the benefits of using a version control system using BitKeeper earlier, but given the restrictive terms, and removal of free tier, he decided to build something of his own.\nFun read, this one https://blog.brachiosoft.com/en/posts/git/\nAside, add “Just for Fun: The Story of an Accidental Revolutionary” to reading list\nInternals How does git work? Why does it use filesystem instead of a database like other systems of the time? Is there a bottleneck? Can it be improved? What comes next? Useful commands Log $ git log --oneline # show one line per commit $ git log -5 --oneline # show last 5 commits $ git log -5 --pretty=\"format:%C(white)%ai %C(yellow)%h %C(blue)%ae %C(reset)%s $ git log --pretty=\"format:%C(white)%ai %C(yellow)%h %C(blue)%an %C(green)(%ae) %C(reset)%s\" -6 2024-05-29 15:00:00 +0000 b06d833 Bot (bot@example.com) chore(release): 1.0.0 deployment Amend Change author name/email for commits already pushed to remote\n$ git rebase -i HEAD~4 $ git commit --amend --no-edit --reset-author Push git push --force-with-lease If somebody else built on top of your original history while you are rebasing, the tip of the branch at the remote may advance with their commit, and blindly pushing with –force will lose their work.\nThis option allows you to say that you expect the history you are updating is what you rebased and want to replace. If the remote ref still points at the commit you specified, you can be sure that no other people did anything to the ref. It is like taking a “lease” on the ref without explicitly locking it, and the remote ref is updated only if the “lease” is still valid.\nManage multiple Git “workspaces” Work1, work2, personal etc. etc.\nSeparate the workspaces into different directories, like -\n. ├── gitlab ├── github └── workgithub Next, in ~/.gitconfig, create individual configs for each directory\n# ~/.gitconfig [user] name = username email = username@email.com [includeIf \"gitdir/i:~/code/gitlab/\"] path = ~/.gitlab.gitconfig [includeIf \"gitdir/i:~/code/github/\"] path = ~/.github.gitconfig [includeIf \"gitdir/i:~/code/workgithub/\"] path = ~/.workgithub.gitconfig # no need to use --set-upstream origin branch [push] autoSetupRemote = true Specify the relevant email, name in directory specific gitconfig file.\n# ~/.gitlab.gitconfig [user] name = gluser email = gluser@gitlab.com # ~/.github.gitconfig [user] email = ghuser@users.noreply.github.com name = ghuser # ~/.workgithub.gitconfig [user] email = ghworkuser@users.noreply.github.com name = ghworkuser Modify your ssh config to use the correct keys for each (don’t reuse the same keys!)\n# ~/.ssh/config Host gitlab.com User git IdentityFile ~/.ssh/glid_rsa Host ghuser.github.com User git Hostname github.com IdentityFile ~/.ssh/ghuserid_rsa Host github.com User git IdentityFile ~/.ssh/ghworkuserid_rsa Finally, when adding an origin for repos under github directory, use the HOST value. Since it is overridden by HOSTNAME, there is no other impact.\n# first git remote add origin git@ghuser.github.com:ghuser/repo.git # edit existing origin git remote set-url origin git@ghuser.github.com:ghuser/repo.git LFS Can you use webp images in git to reduce the binary file sizes? How do you convert png to webp images? References Official site - https://git-scm.com Book - https://git-scm.com/book/en/v2 ","wordCount":"513","inLanguage":"en","datePublished":"2024-07-02T00:00:00Z","dateModified":"2025-04-04T12:48:24+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://abiydv.github.io/notes/git/"},"publisher":{"@type":"Organization","name":"@abiydv","logo":{"@type":"ImageObject","url":"https://abiydv.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://abiydv.github.io/ accesskey=h title="@abiydv (Alt + H)">@abiydv</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://abiydv.github.io/ title=Home><span>Home</span></a></li><li><a href=https://abiydv.github.io/about/ title=About><span>About</span></a></li><li><a href=https://abiydv.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://abiydv.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://abiydv.github.io/notes/ title=Notes><span>Notes</span></a></li><li><a href=https://abiydv.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://abiydv.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://abiydv.github.io/notes/>Notes</a></div><h1 class=post-title>Git<sup>&nbsp;<span class="entry-stage sandbox">&nbsp;sandbox&nbsp;</span></sup></h1><div class=post-description>Distributed version control system</div><div class=post-meta><s>2.7.24</s>&nbsp;4.4.25 / Notes / 3 min</div></header><div class=post-content><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-is-git aria-label="What is git?">What is git?</a></li><li><a href=#history aria-label=History>History</a></li><li><a href=#internals aria-label=Internals>Internals</a></li><li><a href=#useful-commands aria-label="Useful commands">Useful commands</a><ul><li><a href=#log aria-label=Log>Log</a></li><li><a href=#amend aria-label=Amend>Amend</a></li><li><a href=#push aria-label=Push>Push</a></li></ul></li><li><a href=#manage-multiple-git-workspaces aria-label="Manage multiple Git &amp;ldquo;workspaces&amp;rdquo;">Manage multiple Git &ldquo;workspaces&rdquo;</a></li><li><a href=#lfs aria-label=LFS>LFS</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div></div><div class=post-content><h2 id=what-is-git>What is git?<a hidden class=anchor aria-hidden=true href=#what-is-git>#</a></h2><p>Distributed version control system.</p><p><a href=/posts/git-history/>git repo history</a>
<a href=/posts/git-hooks/>git hooks</a>
<a href=/posts/git-hooks-redux/>git hooks redux</a></p><h2 id=history>History<a hidden class=anchor aria-hidden=true href=#history>#</a></h2><p><a href=./people.md#linus-torvalds-1969>Linus</a> developed git after being frustrated with the state of version control systems in that era. He had experienced the benefits of using a version control system using BitKeeper earlier, but given the restrictive terms, and removal of free tier, he decided to build something of his own.</p><p>Fun read, this one <a href=https://blog.brachiosoft.com/en/posts/git/>https://blog.brachiosoft.com/en/posts/git/</a></p><p>Aside, add &ldquo;Just for Fun: The Story of an Accidental Revolutionary&rdquo; to <a href=./books/reading-list.md>reading list</a></p><h2 id=internals>Internals<a hidden class=anchor aria-hidden=true href=#internals>#</a></h2><ul><li>How does git work?</li><li>Why does it use filesystem instead of a database like other systems of the time?</li><li>Is there a bottleneck?</li><li>Can it be improved?</li><li>What comes next?</li></ul><h2 id=useful-commands>Useful commands<a hidden class=anchor aria-hidden=true href=#useful-commands>#</a></h2><h3 id=log>Log<a hidden class=anchor aria-hidden=true href=#log>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ git log --oneline    <span style=color:#75715e># show one line per commit</span>
</span></span><span style=display:flex><span>$ git log -5 --oneline <span style=color:#75715e># show last 5 commits</span>
</span></span><span style=display:flex><span>$ git log -5 --pretty<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;format:%C(white)%ai %C(yellow)%h %C(blue)%ae %C(reset)%s
</span></span></span><span style=display:flex><span><span style=color:#e6db74></span>$<span style=color:#e6db74> git log --pretty=&#34;</span>format:%C<span style=color:#f92672>(</span>white<span style=color:#f92672>)</span>%ai %C<span style=color:#f92672>(</span>yellow<span style=color:#f92672>)</span>%h %C<span style=color:#f92672>(</span>blue<span style=color:#f92672>)</span>%an %C<span style=color:#f92672>(</span>green<span style=color:#f92672>)(</span>%ae<span style=color:#f92672>)</span> %C<span style=color:#f92672>(</span>reset<span style=color:#f92672>)</span>%s<span style=color:#e6db74>&#34; -6
</span></span></span><span style=display:flex><span><span style=color:#e6db74>2024-05-29 15:00:00 +0000 b06d833 Bot (bot@example.com) chore(release): 1.0.0 deployment
</span></span></span></code></pre></div><h3 id=amend>Amend<a hidden class=anchor aria-hidden=true href=#amend>#</a></h3><p>Change author name/email for commits already pushed to remote</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ git rebase -i HEAD~4
</span></span><span style=display:flex><span>$ git commit --amend --no-edit --reset-author &lt;commit hash&gt;
</span></span></code></pre></div><h3 id=push>Push<a hidden class=anchor aria-hidden=true href=#push>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git push --force-with-lease
</span></span></code></pre></div><p>If somebody else built on top of your original history while you are rebasing, the tip of the branch at the remote may advance with their commit, and blindly pushing with &ndash;force will lose their work.</p><p>This option allows you to say that you expect the history you are updating is what you rebased and want to replace. If the remote ref still points at the commit you specified, you can be sure that no other people did anything to the ref. It is like taking a &ldquo;lease&rdquo; on the ref without explicitly locking it, and the remote ref is updated only if the &ldquo;lease&rdquo; is still valid.</p><h2 id=manage-multiple-git-workspaces>Manage multiple Git &ldquo;workspaces&rdquo;<a hidden class=anchor aria-hidden=true href=#manage-multiple-git-workspaces>#</a></h2><blockquote><p>Work1, work2, personal etc. etc.</p></blockquote><p>Separate the workspaces into different directories, like -</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>.
</span></span><span style=display:flex><span>├── gitlab
</span></span><span style=display:flex><span>├── github
</span></span><span style=display:flex><span>└── workgithub
</span></span></code></pre></div><p>Next, in <code>~/.gitconfig</code>, create individual configs for each directory</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># ~/.gitconfig</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>user<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  name <span style=color:#f92672>=</span> username
</span></span><span style=display:flex><span>  email <span style=color:#f92672>=</span> username@email.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>includeIf <span style=color:#e6db74>&#34;gitdir/i:~/code/gitlab/&#34;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  path <span style=color:#f92672>=</span> ~/.gitlab.gitconfig
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>includeIf <span style=color:#e6db74>&#34;gitdir/i:~/code/github/&#34;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  path <span style=color:#f92672>=</span> ~/.github.gitconfig
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>includeIf <span style=color:#e6db74>&#34;gitdir/i:~/code/workgithub/&#34;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  path <span style=color:#f92672>=</span> ~/.workgithub.gitconfig
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># no need to use --set-upstream origin branch</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>push<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  autoSetupRemote <span style=color:#f92672>=</span> true
</span></span></code></pre></div><p>Specify the relevant email, name in directory specific <code>gitconfig</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># ~/.gitlab.gitconfig</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>user<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  name  <span style=color:#f92672>=</span> gluser
</span></span><span style=display:flex><span>  email <span style=color:#f92672>=</span> gluser@gitlab.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ~/.github.gitconfig</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>user<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  email <span style=color:#f92672>=</span> ghuser@users.noreply.github.com
</span></span><span style=display:flex><span>  name  <span style=color:#f92672>=</span> ghuser
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ~/.workgithub.gitconfig</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>user<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  email <span style=color:#f92672>=</span> ghworkuser@users.noreply.github.com
</span></span><span style=display:flex><span>  name  <span style=color:#f92672>=</span> ghworkuser
</span></span></code></pre></div><p>Modify your <code>ssh</code> config to use the correct keys for each (don&rsquo;t reuse the same keys!)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># ~/.ssh/config</span>
</span></span><span style=display:flex><span>Host gitlab.com
</span></span><span style=display:flex><span>  User git
</span></span><span style=display:flex><span>  IdentityFile ~/.ssh/glid_rsa
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Host ghuser.github.com
</span></span><span style=display:flex><span>  User git
</span></span><span style=display:flex><span>  Hostname github.com
</span></span><span style=display:flex><span>  IdentityFile ~/.ssh/ghuserid_rsa
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Host github.com
</span></span><span style=display:flex><span>  User git
</span></span><span style=display:flex><span>  IdentityFile ~/.ssh/ghworkuserid_rsa
</span></span></code></pre></div><p>Finally, when adding an <code>origin</code> for repos under <code>github</code> directory, use the HOST value. Since it is overridden by HOSTNAME, there is no other impact.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># first</span>
</span></span><span style=display:flex><span>git remote add origin git@ghuser.github.com:ghuser/repo.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># edit existing origin</span>
</span></span><span style=display:flex><span>git remote set-url origin git@ghuser.github.com:ghuser/repo.git
</span></span></code></pre></div><h2 id=lfs>LFS<a hidden class=anchor aria-hidden=true href=#lfs>#</a></h2><ul><li>Can you use webp images in git to reduce the binary file sizes?</li><li>How do you convert png to webp images?</li></ul><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li>Official site - <a href=https://git-scm.com>https://git-scm.com</a></li><li>Book - <a href=https://git-scm.com/book/en/v2>https://git-scm.com/book/en/v2</a></li></ul></div><footer class=post-footer><hr><div class=align-center><div class=slimlist-entry><h2>Topics</h2></div><ul class=post-tags><div class=slimlist-entry><li class=post-tags><a href=https://abiydv.github.io/topics/stage-sandbox/>stage/sandbox</a></li></div></ul></div></footer><script src=https://utteranc.es/client.js repo=abiydv/abiydv.github.io issue-term=title label=Comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2019-2025 <a href=https://abiydv.github.io/>@abiydv</a> / </span><span>Published 4.4.25 /
</span><span>Thanks <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>, <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>