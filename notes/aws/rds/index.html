<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>AWS Relational Database Service (RDS) | @abiydv</title>
<meta name=keywords content><meta name=description content="Scope az-scope - provide rds subnet group, collection of multiple az
multi-az
cross-region read replicas
cross-region backup snapshots to help disaster recovery
Engines Questions RDS MySql vs Aurora MySql? Options group? Deployment Options Which deployment option to choose? https://aws.amazon.com/blogs/database/choose-the-right-amazon-rds-deployment-option-single-az-instance-multi-az-instance-or-multi-az-database-cluster/
Single AZ Single instance running in a single AZ. Best suited for development workloads.
A read replica can be configured in the same or a different region. This read replica can be manually promoted if the primary instance fails."><meta name=author content><link rel=canonical href=https://abiydv.github.io/notes/aws/rds/><link crossorigin=anonymous href=/assets/css/stylesheet.c5edd088d0c984c192170cfbab7d2de030010ee0b7d771bd6bca049dd2332874.css integrity="sha256-xe3QiNDJhMGSFwz7q30t4DABDuC313G9a8oEndIzKHQ=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://abiydv.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://abiydv.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://abiydv.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://abiydv.github.io/apple-touch-icon.png><link rel=mask-icon href=https://abiydv.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://abiydv.github.io/notes/aws/rds/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="AWS Relational Database Service (RDS)"><meta property="og:description" content="Scope az-scope - provide rds subnet group, collection of multiple az
multi-az
cross-region read replicas
cross-region backup snapshots to help disaster recovery
Engines Questions RDS MySql vs Aurora MySql? Options group? Deployment Options Which deployment option to choose? https://aws.amazon.com/blogs/database/choose-the-right-amazon-rds-deployment-option-single-az-instance-multi-az-instance-or-multi-az-database-cluster/
Single AZ Single instance running in a single AZ. Best suited for development workloads.
A read replica can be configured in the same or a different region. This read replica can be manually promoted if the primary instance fails."><meta property="og:type" content="article"><meta property="og:url" content="https://abiydv.github.io/notes/aws/rds/"><meta property="article:section" content="notes"><meta property="article:published_time" content="2024-02-15T00:00:00+00:00"><meta property="article:modified_time" content="2025-04-04T12:48:24+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="AWS Relational Database Service (RDS)"><meta name=twitter:description content="Scope az-scope - provide rds subnet group, collection of multiple az
multi-az
cross-region read replicas
cross-region backup snapshots to help disaster recovery
Engines Questions RDS MySql vs Aurora MySql? Options group? Deployment Options Which deployment option to choose? https://aws.amazon.com/blogs/database/choose-the-right-amazon-rds-deployment-option-single-az-instance-multi-az-instance-or-multi-az-database-cluster/
Single AZ Single instance running in a single AZ. Best suited for development workloads.
A read replica can be configured in the same or a different region. This read replica can be manually promoted if the primary instance fails."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Notes","item":"https://abiydv.github.io/notes/"},{"@type":"ListItem","position":2,"name":"AWS","item":"https://abiydv.github.io/notes/aws/"},{"@type":"ListItem","position":3,"name":"AWS Relational Database Service (RDS)","item":"https://abiydv.github.io/notes/aws/rds/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"AWS Relational Database Service (RDS)","name":"AWS Relational Database Service (RDS)","description":"Scope az-scope - provide rds subnet group, collection of multiple az\nmulti-az\ncross-region read replicas\ncross-region backup snapshots to help disaster recovery\nEngines Questions RDS MySql vs Aurora MySql? Options group? Deployment Options Which deployment option to choose? https://aws.amazon.com/blogs/database/choose-the-right-amazon-rds-deployment-option-single-az-instance-multi-az-instance-or-multi-az-database-cluster/\nSingle AZ Single instance running in a single AZ. Best suited for development workloads.\nA read replica can be configured in the same or a different region. This read replica can be manually promoted if the primary instance fails.","keywords":[],"articleBody":"Scope az-scope - provide rds subnet group, collection of multiple az\nmulti-az\ncross-region read replicas\ncross-region backup snapshots to help disaster recovery\nEngines Questions RDS MySql vs Aurora MySql? Options group? Deployment Options Which deployment option to choose? https://aws.amazon.com/blogs/database/choose-the-right-amazon-rds-deployment-option-single-az-instance-multi-az-instance-or-multi-az-database-cluster/\nSingle AZ Single instance running in a single AZ. Best suited for development workloads.\nA read replica can be configured in the same or a different region. This read replica can be manually promoted if the primary instance fails.\nTypical RPO is ~ 5 mintues, and RTO could be several hours depending on the nature of the disaster.\nMulti AZ Instance This is an active-passive setup.\nDo note that in case of a multi-AZ deployment, both instances are NOT in use at the same time. The secondary instance is merely kept up-to-date by synchronous replication, and is promoted to be the primary instance if the primary fails.\nRPO is ZERO due to the synchronous replication.\nRTO could be longer due to variety of factors like -\ncopying transaction logs\nlazy loading from S3 to EBS\ninstance class’s I/O throughput\nrollback uncommitted transaction\nrollforward in-memory committed transactions\nDuring failover, active queries or transactions are cancelled, so it is a recommended to maintain some mechanism to monitor query cancellations.\nReplication is not supported from both sides, that is to say, it cannot really be used for an active/active setup.\nFor multi-AZ deployments, there is possiblity of outage during the time it takes for the instance to fail over (~ 60 seconds).\nOS Maintenance happens on the multi-AZ deployments in steps, secondary first, followed by primary failing over to secondary, then the update continuing on primary.\nDB engine version upgrade however, happens on both both primary and secondary at the same time, causing an outage during this operation. Upgrade on read replica happens independently from the source instance.\nFalling back to primary is difficult.\nBest suited for business critical applications that need high availability and low RPO/RTO.\nDue to the nature of the setup, however, it is not the best scaling option for high read scenarios. Better to use in conjuction with Read replicas or use Multi AZ DB cluster instead.\nAvoid caching DNS data of the DB instances, set a TTL to less than 30 seconds. During a failover, a higher TTL might result in application still trying to use the failed instance.\nMulti AZ DB Cluster Backups Automated and manual snapshots.\nAutomated snapshots can be copied cross-region in the same account but not cross-account.\nManual snapshots can be copied cross-region, cross-account provided they are are not using option groups with persistant or permanent options like TDE, timezone etc.\nSnapshots using default encryption key can also be not shared, they would need to be encryted with custom key which is then shared along with the snapshot.\nChange Data Capture (CDC) Only for MySQL.\nCaptures metadata about all changes in a table. Use for on-going replication during migration.\nRef MS doc\nRDS Proxy Supports Aurora, RDS\nWhen to use RDS Proxy? Too many connections to database Offload the logic to prepare a database connection from your lambda. Make use of the IAM permissions instead to provide access to the database. SaaS or eCommerce applications which prioritize low latency, often need a ready pool of data connections to work with. It makes failover transparent for applications. Since it bypasses DNS (how?, why?), it routes the preserved connections to the new database endpoint thereby reducing failover times for aurora by 66%! RDS Proxy can help avoid out-of memory errors on databases using smaller instance classes like T2, T3.\n","wordCount":"592","inLanguage":"en","datePublished":"2024-02-15T00:00:00Z","dateModified":"2025-04-04T12:48:24+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://abiydv.github.io/notes/aws/rds/"},"publisher":{"@type":"Organization","name":"@abiydv","logo":{"@type":"ImageObject","url":"https://abiydv.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://abiydv.github.io/ accesskey=h title="@abiydv (Alt + H)">@abiydv</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://abiydv.github.io/ title=Home><span>Home</span></a></li><li><a href=https://abiydv.github.io/about/ title=About><span>About</span></a></li><li><a href=https://abiydv.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://abiydv.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://abiydv.github.io/notes/ title=Notes><span>Notes</span></a></li><li><a href=https://abiydv.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://abiydv.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://abiydv.github.io/notes/>Notes</a>&nbsp;»&nbsp;<a href=https://abiydv.github.io/notes/aws/>AWS</a></div><h1 class=post-title>AWS Relational Database Service (RDS)<sup>&nbsp;<span class="entry-stage sandbox">&nbsp;sandbox&nbsp;</span></sup></h1><div class=post-meta><s>15.2.24</s>&nbsp;4.4.25 / Notes / 3 min</div></header><div class=post-content><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#scope aria-label=Scope>Scope</a></li><li><a href=#engines aria-label=Engines>Engines</a></li><li><a href=#questions aria-label=Questions>Questions</a></li><li><a href=#deployment-options aria-label="Deployment Options">Deployment Options</a><ul><li><a href=#single-az aria-label="Single AZ">Single AZ</a></li><li><a href=#multi-az-instance aria-label="Multi AZ Instance">Multi AZ Instance</a></li><li><a href=#multi-az-db-cluster aria-label="Multi AZ DB Cluster">Multi AZ DB Cluster</a></li></ul></li><li><a href=#backups aria-label=Backups>Backups</a></li><li><a href=#change-data-capture-cdc aria-label="Change Data Capture (CDC)">Change Data Capture (CDC)</a></li><li><a href=#rds-proxy aria-label="RDS Proxy">RDS Proxy</a><ul><li><a href=#when-to-use-rds-proxy aria-label="When to use RDS Proxy?">When to use RDS Proxy?</a></li></ul></li></ul></div></details></div></div><div class=post-content><h1 id=scope>Scope<a hidden class=anchor aria-hidden=true href=#scope>#</a></h1><p>az-scope - provide rds subnet group, collection of multiple az<br>multi-az<br>cross-region read replicas<br>cross-region backup snapshots to help disaster recovery</p><h1 id=engines>Engines<a hidden class=anchor aria-hidden=true href=#engines>#</a></h1><h1 id=questions>Questions<a hidden class=anchor aria-hidden=true href=#questions>#</a></h1><ol><li>RDS MySql vs Aurora MySql?</li><li>Options group?</li></ol><h1 id=deployment-options>Deployment Options<a hidden class=anchor aria-hidden=true href=#deployment-options>#</a></h1><p>Which deployment option to choose?
<a href=https://aws.amazon.com/blogs/database/choose-the-right-amazon-rds-deployment-option-single-az-instance-multi-az-instance-or-multi-az-database-cluster/>https://aws.amazon.com/blogs/database/choose-the-right-amazon-rds-deployment-option-single-az-instance-multi-az-instance-or-multi-az-database-cluster/</a></p><h2 id=single-az>Single AZ<a hidden class=anchor aria-hidden=true href=#single-az>#</a></h2><p>Single instance running in a single AZ. Best suited for development workloads.</p><p>A read replica can be configured in the same or a different region. This read replica can be manually promoted if the primary instance fails.</p><p>Typical RPO is ~ 5 mintues, and RTO could be several hours depending on the nature of the disaster.</p><h2 id=multi-az-instance>Multi AZ Instance<a hidden class=anchor aria-hidden=true href=#multi-az-instance>#</a></h2><p>This is an active-passive setup.</p><p>Do note that in case of a multi-AZ deployment, both instances are NOT in use at the same time. The secondary instance is merely kept up-to-date by synchronous replication, and is promoted to be the primary instance if the primary fails.</p><p>RPO is ZERO due to the synchronous replication.<br>RTO could be longer due to variety of factors like -<br>copying transaction logs<br>lazy loading from S3 to EBS<br>instance class&rsquo;s I/O throughput<br>rollback uncommitted transaction<br>rollforward in-memory committed transactions</p><p>During failover, active queries or transactions are cancelled, so it is a recommended to maintain some mechanism to monitor query cancellations.</p><p>Replication is not supported from both sides, that is to say, it cannot really be used for an active/active setup.</p><p>For multi-AZ deployments, there is possiblity of outage during the time it takes for the instance to fail over (~ 60 seconds).</p><p>OS Maintenance happens on the multi-AZ deployments in steps, secondary first, followed by primary failing over to secondary, then the update continuing on primary.</p><p>DB engine version upgrade however, happens on both <em>both</em> primary and secondary at the <em>same</em> time, causing an outage during this operation. Upgrade on read replica happens independently from the source instance.</p><p>Falling back to primary is difficult.</p><p>Best suited for business critical applications that need high availability and low RPO/RTO.</p><p>Due to the nature of the setup, however, it is not the best scaling option for high read scenarios. Better to use in conjuction with Read replicas or use Multi AZ DB cluster instead.</p><p>Avoid caching DNS data of the DB instances, set a TTL to less than 30 seconds. During a failover, a higher TTL might result in application still trying to use the failed instance.</p><h2 id=multi-az-db-cluster>Multi AZ DB Cluster<a hidden class=anchor aria-hidden=true href=#multi-az-db-cluster>#</a></h2><h1 id=backups>Backups<a hidden class=anchor aria-hidden=true href=#backups>#</a></h1><p>Automated and manual snapshots.<br>Automated snapshots can be copied cross-region in the same account but not cross-account.<br>Manual snapshots can be copied cross-region, cross-account provided they are are not using option groups with persistant or permanent options like TDE, timezone etc.<br>Snapshots using default encryption key can also be not shared, they would need to be encryted with custom key which is then shared along with the snapshot.</p><h1 id=change-data-capture-cdc>Change Data Capture (CDC)<a hidden class=anchor aria-hidden=true href=#change-data-capture-cdc>#</a></h1><p>Only for MySQL.<br>Captures metadata about all changes in a table. Use for on-going replication during <a href=/notes/aws/migration/>migration</a>.<br>Ref <a href="https://learn.microsoft.com/en-us/sql/relational-databases/track-changes/about-change-data-capture-sql-server?view=sql-server-ver16">MS doc</a></p><h1 id=rds-proxy>RDS Proxy<a hidden class=anchor aria-hidden=true href=#rds-proxy>#</a></h1><p>Supports <a href=/notes/aws/aurora/>Aurora</a>, <a href=/notes/aws/rds/>RDS</a></p><h2 id=when-to-use-rds-proxy>When to use RDS Proxy?<a hidden class=anchor aria-hidden=true href=#when-to-use-rds-proxy>#</a></h2><p>Too many connections to database
Offload the logic to prepare a database connection from your <a href=/notes/aws/lambda/>lambda</a>. Make use of the IAM permissions instead to provide access to the database.
SaaS or eCommerce applications which prioritize low latency, often need a ready pool of data connections to work with.
It makes failover transparent for applications. Since it bypasses DNS (how?, why?), it routes the preserved connections to the new database endpoint thereby reducing failover times for <a href=/notes/aws/aurora/>aurora</a> by 66%!
RDS Proxy can help avoid out-of memory errors on databases using smaller instance classes like T2, T3.</p></div><footer class=post-footer><hr><div class=align-center><div class=slimlist-entry><h2>Topics</h2></div><ul class=post-tags><div class=slimlist-entry><li class=post-tags><a href=https://abiydv.github.io/topics/aws/>aws</a></li><li class=post-tags><a href=https://abiydv.github.io/topics/stage-sandbox/>stage/sandbox</a></li><li class=post-tags><a href=https://abiydv.github.io/topics/database/>database</a></li></div></ul></div></footer><script src=https://utteranc.es/client.js repo=abiydv/abiydv.github.io issue-term=title label=Comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2019-2025 <a href=https://abiydv.github.io/>@abiydv</a> / </span><span>Published 4.4.25 /
</span><span>Thanks <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>, <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>