<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>AWS Transit Gateway | @abiydv</title>
<meta name=keywords content><meta name=description content="Managed service which offers a hub and spoke model for connecting AWS VPCs and on prem networks. Low operational overhead but not the cheapest.
Features Multiple VPCs can connect to a single transit gateway, which can allow on-prem connectivity via direct connect or cross region connectivity via transit gateway peering.
When using a VPN, or direct-connect, each VPC must only be connected to the TGW, which in turn is coonected to the DC or VPN."><meta name=author content><link rel=canonical href=https://abiydv.github.io/notes/aws/transit-gateway/><link crossorigin=anonymous href=/assets/css/stylesheet.c5edd088d0c984c192170cfbab7d2de030010ee0b7d771bd6bca049dd2332874.css integrity="sha256-xe3QiNDJhMGSFwz7q30t4DABDuC313G9a8oEndIzKHQ=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://abiydv.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://abiydv.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://abiydv.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://abiydv.github.io/apple-touch-icon.png><link rel=mask-icon href=https://abiydv.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://abiydv.github.io/notes/aws/transit-gateway/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="AWS Transit Gateway"><meta property="og:description" content="Managed service which offers a hub and spoke model for connecting AWS VPCs and on prem networks. Low operational overhead but not the cheapest.
Features Multiple VPCs can connect to a single transit gateway, which can allow on-prem connectivity via direct connect or cross region connectivity via transit gateway peering.
When using a VPN, or direct-connect, each VPC must only be connected to the TGW, which in turn is coonected to the DC or VPN."><meta property="og:type" content="article"><meta property="og:url" content="https://abiydv.github.io/notes/aws/transit-gateway/"><meta property="article:section" content="notes"><meta property="article:published_time" content="2024-02-14T00:00:00+00:00"><meta property="article:modified_time" content="2025-04-04T12:48:24+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="AWS Transit Gateway"><meta name=twitter:description content="Managed service which offers a hub and spoke model for connecting AWS VPCs and on prem networks. Low operational overhead but not the cheapest.
Features Multiple VPCs can connect to a single transit gateway, which can allow on-prem connectivity via direct connect or cross region connectivity via transit gateway peering.
When using a VPN, or direct-connect, each VPC must only be connected to the TGW, which in turn is coonected to the DC or VPN."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Notes","item":"https://abiydv.github.io/notes/"},{"@type":"ListItem","position":2,"name":"AWS","item":"https://abiydv.github.io/notes/aws/"},{"@type":"ListItem","position":3,"name":"AWS Transit Gateway","item":"https://abiydv.github.io/notes/aws/transit-gateway/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"AWS Transit Gateway","name":"AWS Transit Gateway","description":"Managed service which offers a hub and spoke model for connecting AWS VPCs and on prem networks. Low operational overhead but not the cheapest.\nFeatures Multiple VPCs can connect to a single transit gateway, which can allow on-prem connectivity via direct connect or cross region connectivity via transit gateway peering.\nWhen using a VPN, or direct-connect, each VPC must only be connected to the TGW, which in turn is coonected to the DC or VPN.","keywords":[],"articleBody":"Managed service which offers a hub and spoke model for connecting AWS VPCs and on prem networks. Low operational overhead but not the cheapest.\nFeatures Multiple VPCs can connect to a single transit gateway, which can allow on-prem connectivity via direct connect or cross region connectivity via transit gateway peering.\nWhen using a VPN, or direct-connect, each VPC must only be connected to the TGW, which in turn is coonected to the DC or VPN.\n3 transit gateway connections are supported over 1 direct connect.\nIf isolation is required between VPCs connected to the TGW, it can be achieved using route table rules.\nWorks cross-account only. For cross-regions, use Transit Gateway peering.\nAWS Transit Gateway works in AZ affinity mode, so keeps the traffic in the specific AZ as long as the destination is in the same AZ.\nMultiple Transit Gateways may be used in the same region for operational ease, restricting the blast radius. Centralized design vs distributed design choices. Limit of 5000 connections per region, this may also dictate if additional TGWs are required.\nLaunch in a dedicated account like networking, and share across the organization accounts using AWS Resource Access Manager. One caveat, it does not share the tags from the source account.\ntransit gateway vpc attachement has an hourly charge\nIf you have a multi-Region deployment, we recommend that you use a unique ASN for each of your transit gateways.\nMix of static and auto-propagated routes Administrative distance Static routes take precedence over auto-propagated routes on tgw Attachment Types #todo Add information about different attachments that TGW supports\nAWS Transit Gateway Connect Attachment type - Transit Gateway Connect Use AWS Transit Gateway Connect to connect AWS infrastructure with on-prem SD-WAN appliances. Use Transit Gateway Connect BGP for dynamic routing and GRE tunnel protocol for high performance, delivering up to 20 Gbps total bandwidth per Connect attachment (up to four Transit Gateway Connect peers per Connect attachment). VPN Type of VPC edge consolidation Supports IPSec termination for site-to-site VPN, customers can create tunnels terminating at TGW and connect to VPCs connected to the TGW. Supports ECMP for VPN attachements which allows you to scale beyond the default limit of 1.25 Gbps per VPN connection. More details - Scaling VPN throughput. Appliance mode Without appliance mode, the cross AZ traffic might be dropped when destination is across AZ due to the TGW AZ affinity property. In appliance mode, transit gateway picks a network interface in the appliance VPC and uses that same one for the return traffic as well.\nUsing 4-tuples of an IP packet, TGW selects a single TGW ENI in the Appliance VPC for the life of a flow to send traffic to.\nRef https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-appliance-scenario.html\nReferences https://aws.amazon.com/blogs/networking-and-content-delivery/centralized-inspection-architecture-with-aws-gateway-load-balancer-and-aws-transit-gateway/ https://aws.amazon.com/blogs/networking-and-content-delivery/building-a-global-network-using-aws-transit-gateway-inter-region-peering/ https://aws.amazon.com/blogs/security/simplify-dns-management-in-a-multiaccount-environment-with-route-53-resolver/ https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-appliance-scenario.html https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-nat-igw.html ","wordCount":"455","inLanguage":"en","datePublished":"2024-02-14T00:00:00Z","dateModified":"2025-04-04T12:48:24+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://abiydv.github.io/notes/aws/transit-gateway/"},"publisher":{"@type":"Organization","name":"@abiydv","logo":{"@type":"ImageObject","url":"https://abiydv.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://abiydv.github.io/ accesskey=h title="@abiydv (Alt + H)">@abiydv</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://abiydv.github.io/ title=Home><span>Home</span></a></li><li><a href=https://abiydv.github.io/about/ title=About><span>About</span></a></li><li><a href=https://abiydv.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://abiydv.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://abiydv.github.io/notes/ title=Notes><span>Notes</span></a></li><li><a href=https://abiydv.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://abiydv.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://abiydv.github.io/notes/>Notes</a>&nbsp;»&nbsp;<a href=https://abiydv.github.io/notes/aws/>AWS</a></div><h1 class=post-title>AWS Transit Gateway<sup>&nbsp;<span class="entry-stage incubating">&nbsp;incubating&nbsp;</span></sup></h1><div class=post-meta><s>14.2.24</s>&nbsp;4.4.25 / Notes / 3 min</div></header><div class=post-content><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#features aria-label=Features>Features</a></li><li><a href=#attachment-types aria-label="Attachment Types">Attachment Types</a></li><li><a href=#aws-transit-gateway-connect aria-label="AWS Transit Gateway Connect">AWS Transit Gateway Connect</a></li><li><a href=#vpn aria-label=VPN>VPN</a></li><li><a href=#appliance-mode aria-label="Appliance mode">Appliance mode</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div></div><div class=post-content><p>Managed service which offers a hub and spoke model for connecting AWS VPCs and on prem networks. Low operational overhead but not the cheapest.</p><p><img loading=lazy src=https://docs.aws.amazon.com/images/whitepapers/latest/building-scalable-secure-multi-vpc-network-infrastructure/images/hub-and-spoke-design.png alt=tgw></p><h1 id=features>Features<a hidden class=anchor aria-hidden=true href=#features>#</a></h1><p>Multiple VPCs can connect to a single transit gateway, which can allow on-prem connectivity via direct connect or cross region connectivity via transit gateway peering.</p><p>When using a <a href=/>VPN</a>, or <a href=/notes/aws/direct-connect/>direct-connect</a>, each VPC must only be connected to the TGW, which in turn is coonected to the DC or VPN.</p><p>3 transit gateway connections are supported over 1 direct connect.</p><p>If isolation is required between VPCs connected to the TGW, it can be achieved using route table rules.</p><p>Works cross-account only. For cross-regions, use Transit Gateway peering.</p><p>AWS Transit Gateway works in AZ affinity mode, so keeps the traffic in the specific AZ as long as the destination is in the same AZ.</p><p>Multiple Transit Gateways may be used in the same region for operational ease, restricting the blast radius. Centralized design vs distributed design choices. Limit of 5000 connections per region, this may also dictate if additional TGWs are required.</p><p>Launch in a dedicated account like networking, and share across the organization accounts using <a href=/>AWS Resource Access Manager</a>. One caveat, it does not share the tags from the source account.</p><p>transit gateway vpc attachement has an hourly charge</p><p>If you have a multi-Region deployment, we recommend that you use a unique <a href=/>ASN</a> for each of your transit gateways.</p><ul><li>Mix of static and auto-propagated routes</li><li>Administrative distance</li><li>Static routes take precedence over auto-propagated routes on tgw</li></ul><h1 id=attachment-types>Attachment Types<a hidden class=anchor aria-hidden=true href=#attachment-types>#</a></h1><p>#todo Add information about different attachments that TGW supports</p><h1 id=aws-transit-gateway-connect>AWS Transit Gateway Connect<a hidden class=anchor aria-hidden=true href=#aws-transit-gateway-connect>#</a></h1><ul><li>Attachment type - Transit Gateway Connect</li><li>Use <a href=https://aws.amazon.com/blogs/networking-and-content-delivery/simplify-sd-wan-connectivity-with-aws-transit-gateway-connect/>AWS Transit Gateway Connect</a> to connect AWS infrastructure with on-prem <a href=/>SD-WAN</a> appliances.</li><li>Use Transit Gateway Connect <a href=/>BGP</a> for dynamic routing and <a href=/>GRE</a> tunnel protocol for high performance, delivering up to 20 Gbps total bandwidth per Connect attachment (up to four Transit Gateway Connect peers per Connect attachment).</li></ul><h1 id=vpn>VPN<a hidden class=anchor aria-hidden=true href=#vpn>#</a></h1><ul><li>Type of <a href=/notes/aws/vpc/#edge-consolidation>VPC edge consolidation</a></li><li>Supports <a href=/>IPSec</a> termination for site-to-site VPN, customers can create tunnels terminating at TGW and connect to VPCs connected to the TGW.</li><li>Supports <a href=/>ECMP</a> for VPN attachements which allows you to scale beyond the default limit of 1.25 Gbps per VPN connection. More details - <a href=https://aws.amazon.com/blogs/networking-and-content-delivery/scaling-vpn-throughput-using-aws-transit-gateway/>Scaling VPN throughput</a>.</li></ul><h1 id=appliance-mode>Appliance mode<a hidden class=anchor aria-hidden=true href=#appliance-mode>#</a></h1><p>Without appliance mode, the cross AZ traffic might be dropped when destination is across AZ due to the TGW AZ affinity property. In appliance mode, transit gateway picks a network interface in the appliance VPC and uses that same one for the return traffic as well.</p><p>Using 4-tuples of an IP packet, TGW selects a single TGW ENI in the Appliance VPC for the life of a flow to send traffic to.</p><p>Ref <a href=https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-appliance-scenario.html>https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-appliance-scenario.html</a></p><p><img loading=lazy src=https://docs.aws.amazon.com/images/vpc/latest/tgw/images/transit-gateway-appliance-dropped-traffic.png alt=appliance-mode-not-enabled></p><p><img loading=lazy src=https://docs.aws.amazon.com/images/vpc/latest/tgw/images/transit-gateway-appliance.png alt=appliance-mode></p><h1 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h1><ul><li><a href=https://aws.amazon.com/blogs/networking-and-content-delivery/centralized-inspection-architecture-with-aws-gateway-load-balancer-and-aws-transit-gateway/>https://aws.amazon.com/blogs/networking-and-content-delivery/centralized-inspection-architecture-with-aws-gateway-load-balancer-and-aws-transit-gateway/</a></li><li><a href=https://aws.amazon.com/blogs/networking-and-content-delivery/building-a-global-network-using-aws-transit-gateway-inter-region-peering/>https://aws.amazon.com/blogs/networking-and-content-delivery/building-a-global-network-using-aws-transit-gateway-inter-region-peering/</a></li><li><a href=https://aws.amazon.com/blogs/security/simplify-dns-management-in-a-multiaccount-environment-with-route-53-resolver/>https://aws.amazon.com/blogs/security/simplify-dns-management-in-a-multiaccount-environment-with-route-53-resolver/</a></li><li><a href=https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-appliance-scenario.html>https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-appliance-scenario.html</a></li><li><a href=https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-nat-igw.html>https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-nat-igw.html</a></li></ul></div><footer class=post-footer><hr><div class=align-center><div class=slimlist-entry><h2>Topics</h2></div><ul class=post-tags><div class=slimlist-entry><li class=post-tags><a href=https://abiydv.github.io/topics/aws/>aws</a></li><li class=post-tags><a href=https://abiydv.github.io/topics/stage-incubating/>stage/incubating</a></li><li class=post-tags><a href=https://abiydv.github.io/topics/network/>network</a></li><li class=post-tags><a href=https://abiydv.github.io/topics/serverless/>serverless</a></li></div></ul></div></footer><script src=https://utteranc.es/client.js repo=abiydv/abiydv.github.io issue-term=title label=Comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2019-2025 <a href=https://abiydv.github.io/>@abiydv</a> / </span><span>Published 4.4.25 /
</span><span>Thanks <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>, <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>