<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Git Hooks | @abiydv</title>
<meta name=keywords content="git"><meta name=description content="Rewrite history, one commit at a time!"><meta name=author content><link rel=canonical href=https://abiydv.github.io/posts/git-hooks/><link crossorigin=anonymous href=/assets/css/stylesheet.c5edd088d0c984c192170cfbab7d2de030010ee0b7d771bd6bca049dd2332874.css integrity="sha256-xe3QiNDJhMGSFwz7q30t4DABDuC313G9a8oEndIzKHQ=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://abiydv.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://abiydv.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://abiydv.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://abiydv.github.io/apple-touch-icon.png><link rel=mask-icon href=https://abiydv.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://abiydv.github.io/posts/git-hooks/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Git Hooks"><meta property="og:description" content="Rewrite history, one commit at a time!"><meta property="og:type" content="article"><meta property="og:url" content="https://abiydv.github.io/posts/git-hooks/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-01-08T00:00:00+00:00"><meta property="article:modified_time" content="2021-01-08T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git Hooks"><meta name=twitter:description content="Rewrite history, one commit at a time!"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://abiydv.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Git Hooks","item":"https://abiydv.github.io/posts/git-hooks/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Git Hooks","name":"Git Hooks","description":"Rewrite history, one commit at a time!","keywords":["git"],"articleBody":"Introduction A consistent convention, whether it is for naming branches or adding commit messages is absolutely essential for a team. Following a common theme or standard ensures the readability and maintainability of the project. It also makes the lives of people who will come after you a lot easier.\nProblem Standards or conventions can be set, however, without oversight there are always chances of people overlooking them. Remember this famous comic? üòÖ\nSolution Git provides scripts out of the box, which run on certain events. These can be run locally or on the git server. Having these hooks locally makes them easier to edit or implement, but they are easy to bypass.\nLocal hooks\npre-commit prepare-commit-msg commit-msg post-commit Server hooks\npre-receive update post-receive To establish an oversight mechanism for commit messages, use the commit_msg hook. It runs after a local commit, and fails the commit if the script exits with a non-zero code.\nLocal hooks can only serve as a guidance and should not be relied upon for enforcements. Server hooks are a better choice for enforcing rules. Local hooks reside in the folder .git/hooks/ and are not checked into source control.\nLet‚Äôs assume we want every team member to add commit messages in the following format -\n[ISSUE-000] Short description in 50 chars or less To nudge the team to adhere to this standard, distribute the commit-msg file in a separate directory in your source control, like hooks.\n1#!/bin/sh 2 3commit_regex='^(\\[ISSUE-[0-9]+\\] [A-Z][a-zA-Z0-9 -]{1,30})$' 4commit_error='Error! Not as per format - 5 [ISSUE-000] Task description 6' 7if ! grep -qE \"$commit_regex\" \"$1\"; then 8 echo \"$commit_error\" \u003e\u00262 9 exit 1 10fi Add appropriate instructions in the README.md of the project on how to enable it. High level steps will be -\nAdd a symlink or simply copy the files from hooks directory to .git/hooks/. Make sure the files under .git/hooks/ are set to executable. Test by adding a random commit you expect to fail - Success! üëè\nCaveats Easily disabled by the user! They can simply delete the file from the .git/hook/ directory, or Use --no-verify cli option with git commit to bypasses this local hook Use server side hooks to enforce compliance or other checks. Local hooks work with Gitbash for Windows, so no extra config is required for Windows. Conclusion Git local hooks provide an excellent option to automatically execute scripts on certain events. For example, run lint after checkout, or do a code scan before commit, etc. Local hooks can be useful to setup oversight, to make sure you don‚Äôt stray from the set standards or conventions. They, however, are not for setting up guardrails or enforcement as they reside on each user‚Äôs system and are completely under their control.\nAdding a check for commit message is only a small part of the overall functionality that Git hooks provide. Check the documentation to know more and explore what else can they do.\nHope this post proves useful! üëç\nNote:¬†Code mentioned above is here¬†References (1) Customizing Git Git Hooks¬†","wordCount":"502","inLanguage":"en","datePublished":"2021-01-08T00:00:00Z","dateModified":"2021-01-08T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://abiydv.github.io/posts/git-hooks/"},"publisher":{"@type":"Organization","name":"@abiydv","logo":{"@type":"ImageObject","url":"https://abiydv.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://abiydv.github.io/ accesskey=h title="@abiydv (Alt + H)">@abiydv</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://abiydv.github.io/ title=Home><span>Home</span></a></li><li><a href=https://abiydv.github.io/about/ title=About><span>About</span></a></li><li><a href=https://abiydv.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://abiydv.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://abiydv.github.io/notes/ title=Notes><span>Notes</span></a></li><li><a href=https://abiydv.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://abiydv.github.io/>Home</a>&nbsp;¬ª&nbsp;<a href=https://abiydv.github.io/posts/>Posts</a></div><h1 class=post-title>Git Hooks</h1><div class=post-description>Rewrite history, one commit at a time!</div><div class=post-meta>8.1.21 / Posts / 3 min</div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>A consistent convention, whether it is for naming branches or adding commit messages is absolutely essential for a team. Following a common theme or standard ensures the readability and maintainability of the project. It also makes the lives of people who will come after you a lot easier.</p><h2 id=problem>Problem<a hidden class=anchor aria-hidden=true href=#problem>#</a></h2><p>Standards or conventions can be set, however, without oversight there are always chances of people overlooking them. Remember <a href=https://xkcd.com/927>this famous comic</a>? &#x1f605;</p><p><img loading=lazy src=https://imgs.xkcd.com/comics/standards.png alt=standards></p><h2 id=solution>Solution<a hidden class=anchor aria-hidden=true href=#solution>#</a></h2><p>Git provides scripts out of the box, which run on certain events. These can be run locally or on the git server. Having these hooks locally makes them easier to edit or implement, but they are easy to bypass.</p><p><strong>Local hooks</strong></p><ul><li><code>pre-commit</code></li><li><code>prepare-commit-msg</code></li><li><code>commit-msg</code></li><li><code>post-commit</code></li></ul><p><strong>Server hooks</strong></p><ul><li><code>pre-receive</code></li><li><code>update</code></li><li><code>post-receive</code></li></ul><p>To establish an oversight mechanism for commit messages, use the <code>commit_msg</code> hook. It runs after a local commit, and fails the commit if the script exits with a non-zero code.</p><p>Local hooks can only serve as a guidance and should not be relied upon for enforcements. Server hooks are a better choice for enforcing rules. Local hooks reside in the folder <code>.git/hooks/</code> and are not checked into source control.</p><p>Let&rsquo;s assume we want every team member to add commit messages in the following format -</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>[ISSUE-000] Short description in 50 chars or less
</span></span></code></pre></div><p>To nudge the team to adhere to this standard, distribute the <code>commit-msg</code> file in a separate directory in your source control, like <code>hooks</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e>#!/bin/sh
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>commit_regex<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;^(\[ISSUE-[0-9]+\] [A-Z][a-zA-Z0-9 -]{1,30})$&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>commit_error<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Error! Not as per format -
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#e6db74>        [ISSUE-000] Task description
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#e6db74>&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#66d9ef>if</span> ! grep -qE <span style=color:#e6db74>&#34;</span>$commit_regex<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    echo <span style=color:#e6db74>&#34;</span>$commit_error<span style=color:#e6db74>&#34;</span> &gt;&amp;<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><p>Add appropriate instructions in the <code>README.md</code> of the project on how to enable it. High level steps will be -</p><ul><li>Add a symlink or simply copy the files from <code>hooks</code> directory to <code>.git/hooks/</code>.</li><li>Make sure the files under <code>.git/hooks/</code> are set to executable.</li></ul><p>Test by adding a random commit you expect to fail -
<img loading=lazy src=../../images/git-hook-fail.JPG alt=image></p><p>Success! &#x1f44f;</p><h2 id=caveats>Caveats<a hidden class=anchor aria-hidden=true href=#caveats>#</a></h2><ul><li>Easily disabled by the user!<ul><li>They can simply delete the file from the <code>.git/hook/</code> directory, or</li><li>Use <code>--no-verify</code> cli option with <code>git commit</code> to bypasses this local hook</li></ul></li><li>Use server side hooks to enforce compliance or other checks.</li><li>Local hooks work with Gitbash for Windows, so no extra config is required for Windows.</li></ul><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>Git local hooks provide an excellent option to automatically execute scripts on certain events. For example, run lint after checkout, or do a code scan before commit, etc. Local hooks can be useful to setup oversight, to make sure you don&rsquo;t stray from the set standards or conventions. They, however, are not for setting up guardrails or enforcement as they reside on each user&rsquo;s system and are completely under their control.</p><p>Adding a check for commit message is only a small part of the overall functionality that Git hooks provide. Check the <a href=https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks>documentation</a> to know more and explore what else can they do.</p><p>Hope this post proves useful! &#x1f44d;</p><b>Note:</b>&nbsp;
Code mentioned above is
<a aria-label="link to https://github.com/abiydv/git-merge-test" target=_blank href=https://github.com/abiydv/git-merge-test>here&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg><h2>References (1)</h2><ol class=slimlist-ol><li class=slimlist-ol><a aria-label="link to https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks" target=_blank href=https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks>Customizing Git Git Hooks&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ol></div><footer class=post-footer><hr><div class=align-center><div class=slimlist-entry><h2>Tags</h2></div><ul class=post-tags><div class=slimlist-entry><li class=post-tags><a href=https://abiydv.github.io/tags/git/>git</a></li></div></ul></div></footer><script src=https://utteranc.es/client.js repo=abiydv/abiydv.github.io issue-term=title label=Comment theme=github-light crossorigin=anonymous async></script><hr><div class=align-left><div class=slimlist-entry><h2>Related</h2></div><ul class=slimlist><li class=slimlist><div class=slimlist-entry><h3 class=slimlist-entry-title><a aria-label="post link to Git History Wars" href=https://abiydv.github.io/posts/git-history/>Git History Wars</a></h3><div class=slimlist-meta>10.1.21 / Posts / 5 min</div></div></li><li class=slimlist><div class=slimlist-entry><h3 class=slimlist-entry-title><a aria-label="post link to Git Hooks Redux" href=https://abiydv.github.io/posts/git-hooks-redux/>Git Hooks Redux</a></h3><div class=slimlist-meta><s>8.5.24</s>&nbsp;13.5.24 / Posts / 2 min</div></div></li></ul></div></article></main><footer class=footer><span>&copy; 2019-2025 <a href=https://abiydv.github.io/>@abiydv</a> / </span><span>Published 4.4.25 /
</span><span>Thanks <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>, <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>