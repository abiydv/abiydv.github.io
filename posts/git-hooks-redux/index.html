<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Git Hooks Redux | @abiydv</title>
<meta name=keywords content="git"><meta name=description content="Use a default commit message hook which works for all local repos"><meta name=author content><link rel=canonical href=https://abiydv.github.io/posts/git-hooks-redux/><link crossorigin=anonymous href=/assets/css/stylesheet.c5edd088d0c984c192170cfbab7d2de030010ee0b7d771bd6bca049dd2332874.css integrity="sha256-xe3QiNDJhMGSFwz7q30t4DABDuC313G9a8oEndIzKHQ=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://abiydv.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://abiydv.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://abiydv.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://abiydv.github.io/apple-touch-icon.png><link rel=mask-icon href=https://abiydv.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://abiydv.github.io/posts/git-hooks-redux/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Git Hooks Redux"><meta property="og:description" content="Use a default commit message hook which works for all local repos"><meta property="og:type" content="article"><meta property="og:url" content="https://abiydv.github.io/posts/git-hooks-redux/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-08T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-13T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git Hooks Redux"><meta name=twitter:description content="Use a default commit message hook which works for all local repos"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://abiydv.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Git Hooks Redux","item":"https://abiydv.github.io/posts/git-hooks-redux/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Git Hooks Redux","name":"Git Hooks Redux","description":"Use a default commit message hook which works for all local repos","keywords":["git"],"articleBody":"Introduction I had written about git hooks in an earlier post. Over the years, I have come to rely quite heavily on local commit msg hook to keep my commit messages consistent with angular commit message format.\nBut, it‚Äôs a pain to set up individually for every repo. I always wanted to have a single hook that could work with all my checked out repos. Since it wasn‚Äôt a huge problem, I always put it off as a someday task. Until that someday arrived last month!\nMy laptop needed replacement, and that meant setting up the local hooks for all the repos (which I had done gradually over the years) again.\nSo, I spent a few mins (or was it hours?) to skim through git docs to find a way to do this once (and for all!). Eventually, I was able to achieve what I wanted with a few steps and this script.\nSteps Clone or download this repo https://github.com/abiydv/commit-msg\n$ cd ~/Downloads $ git clone https://github.com/abiydv/commit-msg.git Add a git template directory location in git config\n$ git config --global init.templatedir '~/.git/global_templates' Copy the downloaded commit-msg hook script to the template directory\n$ mkdir -p ~/.git/global_templates/hooks $ cp ~/Downloads/commit-msg/commit-msg ~/.git/global_templates/hooks/commit-msg Check commit-msg filesystem permissions, and make it executable.\n$ chmod +x ~/.git/global_templates/hooks/commit-msg Run git init for any repo which was initialized prior to adding this config.\nAny new repos will automatically inherit the commit-msg hook.\n.. and, that‚Äôs all there is to it! üëè\nCaveats --template cli option or GIT_TEMPLATE_DIR env var can override the template config provided in ~/.gitconfig -n or --no-verify cli option bypasses all checks. Use server side hooks to enforce compliance or other checks. Local hooks work with Gitbash for Windows, so no extra config is required for Windows. Conclusion As I mentioned in the previous post too, git local hooks can be useful to setup oversight, to make sure you don‚Äôt stray from the standards. However, they are not for setting up guardrails or enforcement as they reside on each user‚Äôs system and are completely under their control.\nReferences (2) Commit Msg¬†Customizing Git Git Hooks¬†","wordCount":"351","inLanguage":"en","datePublished":"2024-05-08T00:00:00Z","dateModified":"2024-05-13T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://abiydv.github.io/posts/git-hooks-redux/"},"publisher":{"@type":"Organization","name":"@abiydv","logo":{"@type":"ImageObject","url":"https://abiydv.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://abiydv.github.io/ accesskey=h title="@abiydv (Alt + H)">@abiydv</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://abiydv.github.io/ title=Home><span>Home</span></a></li><li><a href=https://abiydv.github.io/about/ title=About><span>About</span></a></li><li><a href=https://abiydv.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://abiydv.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://abiydv.github.io/notes/ title=Notes><span>Notes</span></a></li><li><a href=https://abiydv.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://abiydv.github.io/>Home</a>&nbsp;¬ª&nbsp;<a href=https://abiydv.github.io/posts/>Posts</a></div><h1 class=post-title>Git Hooks Redux</h1><div class=post-description>Use a default commit message hook which works for all local repos</div><div class=post-meta><s>8.5.24</s>&nbsp;13.5.24 / Posts / 2 min</div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>I had written about <a href=https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks>git hooks</a> in an <a href=/posts/git-hooks/>earlier post</a>. Over the years, I have come to rely quite heavily on local commit msg hook to keep my commit messages consistent with angular <a href=https://github.com/angular/angular/blob/main/CONTRIBUTING.md#-commit-message-format>commit message format</a>.</p><p>But, it&rsquo;s a pain to set up individually for every repo. I always wanted to have a single hook that could work with all my checked out repos. Since it wasn&rsquo;t a <em>huge</em> problem, I always put it off as a someday task. Until that someday arrived last month!</p><p>My laptop needed replacement, and that meant setting up the local hooks for all the repos (which I had done gradually over the years) <em>again</em>.</p><p>So, I spent a few mins (or was it hours?) to skim through git docs to find a way to do this once (and for all!). Eventually, I was able to achieve what I wanted with a few steps and <a href=https://github.com/abiydv/commit-msg/blob/main/commit-msg>this script</a>.</p><h2 id=steps>Steps<a hidden class=anchor aria-hidden=true href=#steps>#</a></h2><ol><li><p>Clone or download this repo <a href=https://github.com/abiydv/commit-msg>https://github.com/abiydv/commit-msg</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ cd ~/Downloads
</span></span><span style=display:flex><span>$ git clone https://github.com/abiydv/commit-msg.git
</span></span></code></pre></div></li><li><p>Add a git <a href=https://git-scm.com/docs/git-init#_template_directory>template directory</a> location in git config</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ git config --global init.templatedir <span style=color:#e6db74>&#39;~/.git/global_templates&#39;</span>
</span></span></code></pre></div></li><li><p>Copy the downloaded <code>commit-msg</code> hook script to the template directory</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ mkdir -p ~/.git/global_templates/hooks
</span></span><span style=display:flex><span>$ cp ~/Downloads/commit-msg/commit-msg ~/.git/global_templates/hooks/commit-msg
</span></span></code></pre></div></li><li><p>Check <code>commit-msg</code> filesystem permissions, and make it executable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ chmod +x ~/.git/global_templates/hooks/commit-msg
</span></span></code></pre></div></li><li><p>Run <code>git init</code> for any repo which was initialized prior to adding this config.</p></li><li><p>Any new repos will automatically inherit the <code>commit-msg</code> hook.</p></li></ol><p>.. and, that&rsquo;s all there is to it! &#x1f44f;</p><h2 id=caveats>Caveats<a hidden class=anchor aria-hidden=true href=#caveats>#</a></h2><ul><li><code>--template</code> cli option or <code>GIT_TEMPLATE_DIR</code> env var can <em>override</em> the template config provided in <code>~/.gitconfig</code></li><li><code>-n</code> or <code>--no-verify</code> cli option bypasses all checks.</li><li>Use server side hooks to enforce compliance or other checks.</li><li>Local hooks work with Gitbash for Windows, so no extra config is required for Windows.</li></ul><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>As I mentioned in the <a href=/posts/git-hooks/>previous post</a> too, git local hooks can be useful to setup oversight, to make sure you don&rsquo;t stray from the standards. However, they are not for setting up guardrails or enforcement as they reside on each user&rsquo;s system and are completely under their control.</p><h2>References (2)</h2><ol class=slimlist-ol><li class=slimlist-ol><a aria-label="link to https://github.com/bentolor/enforce-angular-commitmessages/blob/master/commit-msg" target=_blank href=https://github.com/bentolor/enforce-angular-commitmessages/blob/master/commit-msg>Commit Msg&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li class=slimlist-ol><a aria-label="link to https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks" target=_blank href=https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks>Customizing Git Git Hooks&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ol></div><footer class=post-footer><hr><div class=align-center><div class=slimlist-entry><h2>Tags</h2></div><ul class=post-tags><div class=slimlist-entry><li class=post-tags><a href=https://abiydv.github.io/tags/git/>git</a></li></div></ul></div></footer><script src=https://utteranc.es/client.js repo=abiydv/abiydv.github.io issue-term=title label=Comment theme=github-light crossorigin=anonymous async></script><hr><div class=align-left><div class=slimlist-entry><h2>Related</h2></div><ul class=slimlist><li class=slimlist><div class=slimlist-entry><h3 class=slimlist-entry-title><a aria-label="post link to Git History Wars" href=https://abiydv.github.io/posts/git-history/>Git History Wars</a></h3><div class=slimlist-meta>10.1.21 / Posts / 5 min</div></div></li><li class=slimlist><div class=slimlist-entry><h3 class=slimlist-entry-title><a aria-label="post link to Git Hooks" href=https://abiydv.github.io/posts/git-hooks/>Git Hooks</a></h3><div class=slimlist-meta>8.1.21 / Posts / 3 min</div></div></li></ul></div></article></main><footer class=footer><span>&copy; 2019-2025 <a href=https://abiydv.github.io/>@abiydv</a> / </span><span>Published 4.4.25 /
</span><span>Thanks <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>, <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>