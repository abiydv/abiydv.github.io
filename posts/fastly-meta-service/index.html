<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Fastly Meta Service | @abiydv</title>
<meta name=keywords content="fastly,vcl,terraform"><meta name=description content="Fastly service which returns information about you"><meta name=author content><link rel=canonical href=https://abiydv.github.io/posts/fastly-meta-service/><link crossorigin=anonymous href=/assets/css/stylesheet.c5edd088d0c984c192170cfbab7d2de030010ee0b7d771bd6bca049dd2332874.css integrity="sha256-xe3QiNDJhMGSFwz7q30t4DABDuC313G9a8oEndIzKHQ=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://abiydv.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://abiydv.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://abiydv.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://abiydv.github.io/apple-touch-icon.png><link rel=mask-icon href=https://abiydv.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://abiydv.github.io/posts/fastly-meta-service/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Fastly Meta Service"><meta property="og:description" content="Fastly service which returns information about you"><meta property="og:type" content="article"><meta property="og:url" content="https://abiydv.github.io/posts/fastly-meta-service/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-10T00:00:00+00:00"><meta property="article:modified_time" content="2020-11-10T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Fastly Meta Service"><meta name=twitter:description content="Fastly service which returns information about you"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://abiydv.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Fastly Meta Service","item":"https://abiydv.github.io/posts/fastly-meta-service/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Fastly Meta Service","name":"Fastly Meta Service","description":"Fastly service which returns information about you","keywords":["fastly","vcl","terraform"],"articleBody":"Introduction Fastly is a popular CDN based on the open-source Varnish. Since it supports VCL, a lot of custom “logic” to handle incoming requests can be added, right at the edge. This improves the user experience as well as frees up the overhead on origin servers.\nWe’ll implement a simple service which will return details about users accessing it. Details like public IP, user-agent, location etc. It can be extended to put out more information as needed.\nSolution The service will rely entirely on Fastly’s VCL and will not depend on the origin at all! This is possible, thanks to synthetic responses that can be served from Fastly.\nThe request flow will be like this (no requests are sent to the origin) - VCL Snippets To make this work, we just need 2 VCL snippets - recv and error.\nAdd the following code in recv snippet -\n1unset req.http.Cookie; 2 3if (req.url ~ \"^/$\" ){ 4 set req.http.synthetic_resp = \"Public IP: \" + req.http.Fastly-Client-IP; 5 error 620; 6} 7 8if (req.url ~ \"^/more$\" ){ 9 set req.http.synthetic_resp = \"Public IP: \" + req.http.Fastly-Client-IP + \" | City: \" + std.toupper(client.geo.city) + \" | Country: \" + client.geo.country_code + \" | User-Agent: \" + req.http.user-agent + \" | FServer: \" + server.hostname + \" | FDC: \" + server.datacenter; 10 error 620; 11} 12 13if (req.url ~ \"^/ip$\" ){ 14 set req.http.synthetic_resp = req.http.Fastly-Client-IP; 15 error 620; 16} 17 18set req.http.synthetic_resp = \"Not Found!\"; 19error 644; Add the following code in error snippet -\n1if (obj.status == 620) { 2 set obj.status = 200; 3 set obj.response = \"OK\"; 4 set obj.http.Content-Type = \"text/html\"; 5 set obj.http.cache-control = \"private, no-store, no-cache, max-age=0\"; 6 synthetic req.http.synthetic_resp; 7 return (deliver); 8} 9 10if (obj.status == 644) { 11 set obj.status = 404; 12 set obj.response = \"Not Found\"; 13 set obj.http.Content-Type = \"text/html\"; 14 set obj.http.cache-control = \"private, no-store, no-cache, max-age=0\"; 15 synthetic req.http.synthetic_resp; 16 return (deliver); 17} Both snippets and other service configurations are available here\nDeployment The service, configurations and vcls can be quickly deployed to Fastly using Terraform. The required code is here\nTests Once the service is ready, verify the responses either via curl or browser.\nCurl responses (masked some bits)\n1$ curl http://meta.dane-example.com.global.prod.fastly.net 2Public IP: 192.168.1.1 3 4$ curl http://meta.dane-example.com.global.prod.fastly.net/more 5Public IP: 192.168.1.1 | City: CITY | Country: GB | User-Agent: curl/7.73.0 | FServer: cache-lhr7341 | FDC: LHR 6 7$ curl http://meta.dane-example.com.global.prod.fastly.net/ip 8192.168.1.1 9 10$ curl http://meta.dane-example.com.global.prod.fastly.net/random 11Not Found! Conclusion This service can be nice value add, and also help non-technical folks gather all the information needed for whitelisting or debugging issues. It removes any reliance on 3rd party services which may or may not be hosted in secure environments. It is possible to further enhance this service to put out even more information, as needed.\nNote: Code mentioned above is here References (1) About Vcl Snippets ","wordCount":"479","inLanguage":"en","datePublished":"2020-11-10T00:00:00Z","dateModified":"2020-11-10T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://abiydv.github.io/posts/fastly-meta-service/"},"publisher":{"@type":"Organization","name":"@abiydv","logo":{"@type":"ImageObject","url":"https://abiydv.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://abiydv.github.io/ accesskey=h title="@abiydv (Alt + H)">@abiydv</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://abiydv.github.io/ title=Home><span>Home</span></a></li><li><a href=https://abiydv.github.io/about/ title=About><span>About</span></a></li><li><a href=https://abiydv.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://abiydv.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://abiydv.github.io/notes/ title=Notes><span>Notes</span></a></li><li><a href=https://abiydv.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://abiydv.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://abiydv.github.io/posts/>Posts</a></div><h1 class=post-title>Fastly Meta Service</h1><div class=post-description>Fastly service which returns information about you</div><div class=post-meta>10.11.20 / Posts / 3 min</div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p><a href=https://www.fastly.com/why-fastly>Fastly</a> is a popular CDN based on the open-source <a href=https://varnish-cache.org/intro/index.html#intro>Varnish</a>. Since it supports <a href=https://varnish-cache.org/docs/2.1/reference/vcl.html>VCL</a>, a lot of custom &ldquo;logic&rdquo; to handle incoming requests can be added, right at the edge. This improves the user experience as well as frees up the overhead on origin servers.</p><p>We&rsquo;ll implement a simple service which will return details about users accessing it. Details like public IP, user-agent, location etc. It can be extended to put out more information as needed.</p><h2 id=solution>Solution<a hidden class=anchor aria-hidden=true href=#solution>#</a></h2><p>The service will rely entirely on Fastly&rsquo;s VCL and will not depend on the origin at all! This is possible, thanks to synthetic responses that can be served from Fastly.</p><p>The request flow will be like this (no requests are sent to the origin) -
<img loading=lazy src=../../images/fastly-meta-service.jpg alt=fastly-meta-service></p><h2 id=vcl-snippets>VCL Snippets<a hidden class=anchor aria-hidden=true href=#vcl-snippets>#</a></h2><p>To make this work, we just need 2 VCL snippets - <code>recv</code> and <code>error</code>.</p><p>Add the following code in <code>recv</code> snippet -</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>unset req.http.Cookie;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>req.url ~ <span style=color:#e6db74>&#34;^/</span>$<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>){</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>  set req.http.synthetic_resp <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Public IP: &#34;</span> + req.http.Fastly-Client-IP;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  error 620;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>req.url ~ <span style=color:#e6db74>&#34;^/more</span>$<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>){</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>  set req.http.synthetic_resp <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Public IP: &#34;</span> + req.http.Fastly-Client-IP + <span style=color:#e6db74>&#34; | City: &#34;</span> + std.toupper<span style=color:#f92672>(</span>client.geo.city<span style=color:#f92672>)</span> + <span style=color:#e6db74>&#34; | Country: &#34;</span> + client.geo.country_code + <span style=color:#e6db74>&#34; | User-Agent: &#34;</span> + req.http.user-agent + <span style=color:#e6db74>&#34; | FServer: &#34;</span> + server.hostname + <span style=color:#e6db74>&#34; | FDC: &#34;</span> + server.datacenter;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>  error 620;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>req.url ~ <span style=color:#e6db74>&#34;^/ip</span>$<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>){</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>  set req.http.synthetic_resp <span style=color:#f92672>=</span> req.http.Fastly-Client-IP;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>  error 620;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>set req.http.synthetic_resp <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Not Found!&#34;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>error 644;
</span></span></code></pre></div><p>Add the following code in <code>error</code> snippet -</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>obj.status <span style=color:#f92672>==</span> 620<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>    set obj.status <span style=color:#f92672>=</span> 200;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>    set obj.response <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;OK&#34;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    set obj.http.Content-Type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;text/html&#34;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    set obj.http.cache-control <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;private, no-store, no-cache, max-age=0&#34;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    synthetic req.http.synthetic_resp;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    <span style=color:#66d9ef>return</span> <span style=color:#f92672>(</span>deliver<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>obj.status <span style=color:#f92672>==</span> 644<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>    set obj.status <span style=color:#f92672>=</span> 404;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    set obj.response <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Not Found&#34;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    set obj.http.Content-Type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;text/html&#34;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>    set obj.http.cache-control <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;private, no-store, no-cache, max-age=0&#34;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>    synthetic req.http.synthetic_resp;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>    <span style=color:#66d9ef>return</span> <span style=color:#f92672>(</span>deliver<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Both snippets and other service configurations are available <a href=https://github.com/abiydv/fastly-meta-service>here</a></p><h2 id=deployment>Deployment<a hidden class=anchor aria-hidden=true href=#deployment>#</a></h2><p>The service, configurations and vcls can be quickly deployed to Fastly using Terraform. The required code is <a href=https://github.com/abiydv/fastly-meta-service>here</a></p><h2 id=tests>Tests<a hidden class=anchor aria-hidden=true href=#tests>#</a></h2><p>Once the service is ready, verify the responses either via <a href=/posts/curl-cheatsheet/>curl</a> or browser.</p><p><img loading=lazy src=../../images/fastly-meta-service-test.gif alt=fastly-meta-service-test></p><p>Curl responses (masked some bits)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>$ curl http://meta.dane-example.com.global.prod.fastly.net
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>Public IP: 192.168.1.1
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>$ curl http://meta.dane-example.com.global.prod.fastly.net/more
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>Public IP: 192.168.1.1 | City: CITY | Country: GB | User-Agent: curl/7.73.0 | FServer: cache-lhr7341 | FDC: LHR
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>$ curl http://meta.dane-example.com.global.prod.fastly.net/ip
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>192.168.1.1
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>$ curl http://meta.dane-example.com.global.prod.fastly.net/random
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>Not Found!
</span></span></code></pre></div><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>This service can be nice value add, and also help non-technical folks gather all the information needed for whitelisting or debugging issues. It removes any reliance on 3rd party services which may or may not be hosted in secure environments. It is possible to further enhance this service to put out even more information, as needed.</p><b>Note:</b>&nbsp;
Code mentioned above is
<a aria-label="link to https://github.com/abiydv/fastly-meta-service" target=_blank href=https://github.com/abiydv/fastly-meta-service>here&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg><h2>References (1)</h2><ol class=slimlist-ol><li class=slimlist-ol><a aria-label="link to https://docs.fastly.com/en/guides/about-vcl-snippets" target=_blank href=https://docs.fastly.com/en/guides/about-vcl-snippets>About Vcl Snippets&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ol></div><footer class=post-footer><hr><div class=align-center><div class=slimlist-entry><h2>Tags</h2></div><ul class=post-tags><div class=slimlist-entry><li class=post-tags><a href=https://abiydv.github.io/tags/fastly/>fastly</a></li><li class=post-tags><a href=https://abiydv.github.io/tags/vcl/>vcl</a></li><li class=post-tags><a href=https://abiydv.github.io/tags/terraform/>terraform</a></li></div></ul></div></footer><script src=https://utteranc.es/client.js repo=abiydv/abiydv.github.io issue-term=title label=Comment theme=github-light crossorigin=anonymous async></script><hr><div class=align-left><div class=slimlist-entry><h2>Related</h2></div><ul class=slimlist><li class=slimlist><div class=slimlist-entry><h3 class=slimlist-entry-title><a aria-label="post link to Fastly Geolocation Service" href=https://abiydv.github.io/posts/fastly-geo-service/>Fastly Geolocation Service</a></h3><div class=slimlist-meta>6.3.21 / Posts / 6 min</div></div></li><li class=slimlist><div class=slimlist-entry><h3 class=slimlist-entry-title><a aria-label="post link to Hashicorp Certified Terraform Associate - My Experience" href=https://abiydv.github.io/posts/certified-terraform-associate/>Hashicorp Certified Terraform Associate - My Experience</a></h3><div class=slimlist-meta>11.12.20 / Posts / 4 min</div></div></li><li class=slimlist><div class=slimlist-entry><h3 class=slimlist-entry-title><a aria-label="post link to Day 1 with GCP - Cloud Functions" href=https://abiydv.github.io/posts/day1-gcp-cloud-functions/>Day 1 with GCP - Cloud Functions</a></h3><div class=slimlist-meta>19.11.20 / Posts / 3 min</div></div></li></ul></div></article></main><footer class=footer><span>&copy; 2019-2025 <a href=https://abiydv.github.io/>@abiydv</a> / </span><span>Published 4.4.25 /
</span><span>Thanks <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>, <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>